{% extends "account/base.html" %}
{% load i18n %}
{% load voyage_extras %}

{% block center-content %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/contribute/bootstrap.min.css">
<style>
    .blank_value {
        color: lightgray;
    }
</style>
<div class="btn-group">
    <button type="button" class="btn btn-default" aria-label="Print" id="print_button">
        <span class="glyphicon glyphicon-print" aria-hidden="true"></span>&nbsp;&nbsp;{% trans "Print" %}
    </button>
    {% if contribution.status == 0 and user.pk == contribution.contributor.pk %}
        <button type="button" class="btn btn-default" aria-label="Submit">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>&nbsp;&nbsp;{% trans "Edit contribution" %}
        </button>
        <button type="button" class="btn btn-primary" aria-label="Submit">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>&nbsp;&nbsp;{% trans "Submit for review" %}
        </button>
        <button type="button" class="btn btn-danger" aria-label="Submit">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>&nbsp;&nbsp;{% trans "Cancel contribution" %}
        </button>
    {% endif %}
</div>
<br />
<br />
<p>
    Some explanatory text?
</p>
<div>
    <input type="checkbox" id="show_blanks"> <label for="show_blanks">{% trans "Show blank inputs" %}</label>
</div>
{% with blank_text='<span class="blank_value">(blank)</span>' %}
<div class="col-md-12" id="data_display">
    <h1>{% trans "Ship, nation, owners" %}</h1>
    {% with form.name_of_vessel as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f.value|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.ship_construction_place as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f.value|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.ship_registration_place as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f.value|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.year_ship_constructed as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f.value|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.year_ship_registered as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f.value|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.national_carrier as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f|selected_choice|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.rig_of_vessel as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f|selected_choice|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.tonnage_of_vessel as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f.value|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
    {% with form.ton_type as f %}
        <div class="row{% if f.value == None %} blank{% endif%}">
            {{ f.label_tag }}
            <span id="id_{{ f.html_name }}">{{ f|selected_choice|default_if_none:blank_text }}</span>
        </div>
    {% endwith %}
</div>
{% endwith %}
<script type="text/javascript" src="{{ STATIC_URL }}scripts/contribute/bootstrap.min.js">
</script>
<script type="text/javascript">
    $('#show_blanks').change(function() {
        var checked = $(this).prop('checked');
        $('.blank').toggle(checked);
    });

    $('#show_blanks').trigger('change');

    $('#print_button').click(function() {
        print($('#data_display').html());
    });

    function print(data) {
        var mywindow = window.open('', 'my div', 'height=640,width=800');
        mywindow.document.write('<html><head><title>' + window.title + '</title>');
        /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');

        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10

        mywindow.print();
        mywindow.close();

        return true;
    }
</script>
{% endblock %}