{% load i18n %}
<!-- Left menu for Understanding the Database -->

<link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/voyage/popup.css">
<link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}css/voyage/popup-permlink.css">

<div class="search-side-panel">

    <div class="box-main-table box-expanded">
        <div class="box-header">
            <div class="box-button" onclick="">
                &nbsp;
            </div>
            <div class="box-text-label">
                {% trans 'Select time frame' %}
            </div>

        </div>

        <div class="box-mid-end">
            From: {{ request.session.time_span_form.frame_from_year }}
            To: {{ request.session.time_span_form.frame_to_year }}
            <br />
            <span class="italic">
                {% trans 'The full extent of time from the first to the last voyage is ' %}
                {{ voyage_span_first_year }}-{{ voyage_span_last_year }}
                <a id="restore_form"
                   onclick="set_elem('id_frame_from_year', {{ voyage_span_first_year }});
                        set_elem('id_frame_to_year', {{ voyage_span_last_year }});"
                   href="">{%  trans '(restore it)' %}</a>.
            </span>
        </div>


    </div>
    <div>
        <div class="box-expanded">
            <div class="box-header-head">
                <div class="box-button" onclick="">
                    &nbsp;
                </div>
                <div class="box-text-label">
                    {% trans 'Basic variables' %}
                </div>

            </div>

            <div class="box-mid">
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_voyage_id">
                                {% trans 'Voyage identification number' %}</div>
                            <div class="menu-popup-submenu-item" name="var_ship_name">
                                {% trans 'Vessel name' %}</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_nationality">
                                {% trans 'Flag' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_owner">
                                {% trans 'Vessel owner' %}</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Ship, nation, owners' %}</span> ({% trans '4 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_outcome_slaves">
                                {% trans 'Outcome of voyage for slaves' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_outcome_owner">
                                {% trans 'Outcome of voyage for owner' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_resistance">
                                {% trans 'African resistance' %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Voyage Outcome' %}</span> ({% trans '3 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_imp_port_voyage_begin">
                                {% trans 'Place where voyage began' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imp_principal_place_of_slave_purchase">
                                {% trans 'Principal place of slave purchase' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imp_principal_port_slave_dis">
                                {% trans 'Principal place of slave landing' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_place_voyage_ended">
                                {% trans 'Place where voyage ended' %}</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Voyage Itinerary' %}</span> ({% trans '4 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_imp_arrival_at_port_of_dis">
                                {% trans 'Year arrived with slaves' %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Voyage Dates' %}</span> ({% trans '1 variable' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_captain">
                                {% trans "Captain's name" %}</div>
                            <div class="menu-popup-submenu-item" name="var_crew_voyage_outset">
                                {% trans 'Crew at voyage outset' %}</div>
                            <div class="menu-popup-submenu-item" name="var_crew_died_complete_voyage">
                                {% trans 'Crew deaths during voyage' %}</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Captain and Crew' %}</span> ({% trans '3 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_imp_total_num_slaves_purchased">
                                {% trans "Total slaves embarked" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imp_total_slaves_disembarked">
                                {% trans 'Total slaves disembarked' %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Slaves (numbers)' %}</span> ({% trans '2 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_men">
                                {% trans "Percentage men" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_women">
                                {% trans 'Percentage women' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_boys">
                                {% trans 'Percentage boys' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_girls">
                                {% trans 'Percentage girls' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_male">
                                {% trans "Percentage male" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_child">
                                {% trans 'Percentage children' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_mortality">
                                {% trans "Mortality rate" %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Slaves (characteristics)' %}</span> ({% trans '7 variables' %})</div>
                <div class="menu-popup-item-main-last">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_sources">{% trans 'Sources' %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Source' %}</span> ({% trans '1 variable' %})
                </div>
            </div>
        </div>
        <div class="box-main-table-tail box-collapsed">
             <div class="box-header-tail">
                <div class="box-button">
                    &nbsp;
                </div>
                <div class="box-text-label">
                    {% trans 'General variables' %}
                </div>

            </div>

            <div class="box-mid-end">
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_voyage_id">{% trans 'Voyage identification number' %}</div>
                            <div class="menu-popup-submenu-item" name="var_voyage_in_cd_rom">
                                {% trans 'Voyage in 1999 CD-ROM' %}</div>
                            <div class="menu-popup-submenu-item" name="var_ship_name">
                                {% trans 'Vessel name' %}</div>
                            <div class="menu-popup-submenu-item" name="var_nationality">
                                {% trans 'Flag' %}</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_nationality" >
                                {% trans 'Flag' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_vessel_construction_place">
                                {% trans 'Place constructed' %}</div>
                            <div class="menu-popup-submenu-item" name="var_year_of_construction">
                                {% trans 'Year constructed' %}</div>
                            <div class="menu-popup-submenu-item" name="var_registered_place">
                                {% trans 'Place registered' %}</div>
                            <div class="menu-popup-submenu-item" name="var_registered_year">
                                {% trans 'Year registered' %}</div>
                            <div class="menu-popup-submenu-item" name="var_rig_of_vessel">
                                {% trans 'Rig' %}</div>
                            <div class="menu-popup-submenu-item" name="var_tonnage">
                                {% trans 'Tonnage' %}</div>
                            <div class="menu-popup-submenu-item" name="var_tonnage_mod">
                                {% trans 'Standardized tonnage' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_guns_mounted">
                                {% trans 'Guns mounted' %}</div>
                            <div class="menu-popup-submenu-item" name="var_owner">
                                {% trans 'Vessel owners' %}</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Ship, nation, owners' %}</span> ({% trans '14 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_outcome_voyage">
                                {% trans 'Particular outcome of voyage' %}</div>
                            <div class="menu-popup-submenu-item" name="var_outcome_slaves">
                                {% trans 'Outcome of voyage for slaves' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_outcome_ship_captured">
                                {% trans 'Outcome of voyage if ship captured' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_outcome_owner">
                                {% trans 'Outcome of voyage for owner' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_resistance">
                                {% trans 'African resistance' %}</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Voyage Outcome' %}</span> ({% trans '5 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_imp_port_voyage_begin">
                                {% trans 'Place where voyage began' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_first_place_slave_purchase">
                                {% trans 'First place of slave purchase' %}</div>
                            <div class="menu-popup-submenu-item" name="var_second_place_slave_purchase">
                                {% trans 'Second place of slave purchase' %}</div>
                            <div class="menu-popup-submenu-item" name="var_third_place_slave_purchase">
                                {% trans 'Third place of slave purchase' %}</div>
                            <div class="menu-popup-submenu-item" name="var_imp_principal_place_of_slave_purchase">
                                {% trans 'Principal place of slave purchase' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_port_of_call_before_atl_crossing">
                                {% trans 'Places of call before Atlantic crossing' %}</div>
                            <div class="menu-popup-submenu-item" name="var_first_landing_place">
                                {% trans 'First place of slave landing' %}</div>
                            <div class="menu-popup-submenu-item" name="var_second_landing_place">
                                {% trans 'Second place of slave landing' %}</div>
                            <div class="menu-popup-submenu-item" name="var_third_landing_place">
                                {% trans 'Third place of slave landing' %}</div>
                            <div class="menu-popup-submenu-item" name="var_imp_principal_port_of_slave_dis">
                                {% trans 'Principal place of slave landing' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_place_voyage_ended">
                                {% trans 'Place where voyage ended' %}</div>

                        </div>
                    </div>
                    <span class="bold">{% trans 'Voyage Itinerary' %}</span> ({% trans '11 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_imp_arrival_at_port_of_dis">
                                {% trans 'Year arrived with slaves' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_voyage_began">
                                {% trans 'Date voyage began' %}</div>
                            <div class="menu-popup-submenu-item" name="var_slave_purchase_began">
                                {% trans 'Date trade began in Africa' %}</div>
                            <div class="menu-popup-submenu-item" name="var_vessel_left_port">
                                {% trans 'Date vessel departed Africa' %}</div>
                            <div class="menu-popup-submenu-item" name="var_first_dis_of_slaves">
                                {% trans 'Date vessel arrived with slaves' %}</div>
                            <div class="menu-popup-submenu-item" name="var_departure_last_place_of_landing">
                                {% trans 'Date vessel departed for homeport' %}</div>
                            <div class="menu-popup-submenu-item" name="var_voyage_completed">
                                {% trans 'Date voyage completed' %}</div>
                            <div class="menu-popup-submenu-item" name="var_imp_length_home_to_disembark">
                                {% trans 'Voyage length, homeport to slaves landing (days)' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_length_middle_passage_days">
                                {% trans 'Middle passage (days)' %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Voyage Dates' %}</span> ({% trans '9 variable' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_captain">
                                {% trans "Captain's name" %}</div>
                            <div class="menu-popup-submenu-item" name="var_crew_voyage_outset">
                                {% trans 'Crew at voyage outset' %}</div>
                            <div class="menu-popup-submenu-item" name="var_crew_first_landing">
                                {% trans 'Crew at first landing of slaves' %}</div>
                            <div class="menu-popup-submenu-item" name="var_crew_died_complete_voyage">
                                {% trans 'Crew deaths during voyage' %}</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Captain and Crew' %}</span> ({% trans '3 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_num_slaves_intended_first_port">
                                {% trans "Number of slaves intended at first place of purchase" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_num_slaves_carried_first_port">
                                {% trans "Slaves carried from first port of purchase" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_num_slaves_carried_second_port">
                                {% trans "Slaves carried from second port of purchase" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_num_slaves_carried_third_port">
                                {% trans "Slaves carried from third port of purchase" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_total_num_slaves_purchased">
                                {% trans "Total slaves embarked" %}</div>
                            <div class="menu-popup-submenu-item" name="var_imp_total_num_slaves_purchased">
                                {% trans "Total slaves embarked" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_total_num_slaves_arr_first_port_embark">
                                {% trans "Number of slaves arriving at first place of landing" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_num_slaves_disembark_first_place">
                                {% trans "Number of slaves disembarked at first place of landing" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_second place of landing">
                                {% trans "Number of slaves disembarked at second place of landing" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_num_slaves_disembark_third_place">
                                {% trans "Number of slaves disembarked at third place of landing" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imp_total_slaves_disembarked">
                                {% trans 'Total slaves disembarked' %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Slaves (numbers)' %}</span> ({% trans '11 variables' %})</div>
                <div class="menu-popup-item-main">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_men">
                                {% trans "Percentage men" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_women">
                                {% trans 'Percentage women' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_boys">
                                {% trans 'Percentage boys' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_girls">
                                {% trans 'Percentage girls' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_female">
                                {% trans "Percentage female" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_male">
                                {% trans "Percentage male" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_percentage_child">
                                {% trans 'Percentage children' %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_sterling_cash">
                                {% trans "Sterling cash price in Jamaica" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_death_middle_passage">
                                {% trans "Slave deaths during middle passage" %}*</div>
                            <div class="menu-popup-submenu-item" name="var_imputed_mortality">
                                {% trans "Mortality rate" %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Slaves (characteristics)' %}</span> ({% trans '9 variables' %})</div>
                <div class="menu-popup-item-main-last">
                    <div class="menu-popup-submenu-frame hidden">
                        <div class="menu-popup-submenu">
                            <div class="menu-popup-submenu-item" name="var_sources">{% trans 'Sources' %}*</div>
                        </div>
                    </div>
                    <span class="bold">{% trans 'Source' %}</span> ({% trans '1 variable' %})
                </div>
            </div>
        </div>
    </div>

    <div class="box-main-table box-expanded">
         <div class="box-header">
            <div class="box-button">
                &nbsp;
            </div>
            <div class="box-text-label">
                {% trans 'Current query' %}
            </div>
        </div>

        <div class="box-mid-end">
            <div class=query-builder>
                {%  if request.session.existing_form %}
                    {% for elem in request.session.existing_form %}
                    <div class="sidebox">
                        <!-- Search box header -->
                        <span class="query-builder-label" id="{{ elem.input_field_name }}">{{ elem.var_full_name }}</span>
                        <input type="hidden" name="list-input-params" value="{{ elem.varname }}">

                        <span class="query-builder-button close-button">
                            <img src="{{ STATIC_URL }}images/voyage/icon-remove.png"
                                 onclick="delete_box('header_{{ elem.varname }}', '{{ elem.varname }}');" />
                        </span>

                        <span class="query-builder-button move-down-button">
                            <img src="{{ STATIC_URL }}images/voyage/icon-move-down.png"
                                 onclick="move_box_down('header_{{ elem.varname }}');" />
                        </span>

                        <span class="query-builder-button move-up-button">
                            <img src="{{ STATIC_URL }}images/voyage/icon-move-up.png"
                                 onclick="move_box_up('{{ elem.input_field_name }}');" />
                        </span>


                        {% if elem.type == "plain_text" %}
                            {% for field in elem.form %}
                                <span class="simple-field">{{ field }}</span>
                            {% endfor %}

                        {% elif elem.type == "numeric" %}
                            {{ elem.form.options }}
                            <span class="range_field between_field hidden">
                            {{ elem.form.lower_bound }} - {{ elem.form.upper_bound }}
                            </span>
                            <span class="range_field threshold_field">
                            {{ elem.form.threshold }}
                            </span>

                        {% elif elem.type == "select" %}
                            <div id="{{ elem.varname_wrapper }}">
                                <div class="query-select-initial" >
                                    <div class="query-select-selected-text">[{% trans 'nothing selected' %}]
                                    </div>
                                <br /><input type="button" onclick="expandChoices('{{ elem.varname_wrapper }}');"
                                             value="Select" class="display_inline">
                                </div>

                                <div class="query-select-full hidden">
                                    {% trans 'Quicksearch' %}
                                        <input class="quick-query-builder-text" type="text" autocomplete="off" value=""
                                           onkeyup="filter_edit_list('{{ elem.varname_wrapper }}');"
                                           name="tmp" style="width: 200px;" />

                                    <div class="query-builder-edit-list">
                                        {% for opt in elem.form.choice_field %}
                                            {{ opt }}
                                        {% endfor %}
                                    </div>


                                    <div style="margin-top: 5px;">
                                        <input type="button" class="collapseCheckBoxButton"
                                               onclick="collapseCheckBoxes('{{ elem.varname_wrapper }}', 'var-checkbox')"
                                               value="OK" class="display_inline">
                                        <input type="button" onclick="checkAllBoxes('{{ elem.varname_wrapper }}');"
                                               value="Select all" class="display_inline">
                                        <input type="button" onclick="uncheckAllBoxes('{{ elem.varname_wrapper }}');"
                                               value="Deselect all" class="display_inline">
                                    </div>
                                </div>
                            </div>

                        {% elif elem.type == "select_three_layers" %}
                            <div id="{{ elem.varname_wrapper }}">
                                <div class="query-select-initial" >
                                    <div class="query-select-selected-text">[{% trans 'nothing selected' %}]
                                    </div>
                                <br /><input type="button" onclick="expandChoices('{{ elem.varname_wrapper }}');"
                                             value="Select" class="display_inline">
                                </div>

                                <div class="query-select-full hidden">
                                    {% trans 'Quicksearch' %}
                                        <input class="quick-query-builder-text" type="text" autocomplete="off" value=""
                                           onkeyup="filter_hierarchical_list('{{ elem.varname_wrapper }}');"
                                           name="" style="width: 200px;" />

                                    <div class="query-builder-edit-list-expandable">
                                        {% if elem.choices %}
                                            <ul>
                                            {% for item_layer0 in elem.choices %}
                                                <li>
                                                    <div class="query-builder-list-item-collapsed"
                                                         onclick="expandOrCollapse('{{ item_layer0.id }}')" >&nbsp;</div>
                                                    <label for="{{ item_layer0.id }}">
                                                        <input id="{{ item_layer0.id }}"
                                                               name="{{ elem.selected_areas }}"
                                                               value="{{ item_layer0.text }}"
                                                               class="var-checkbox checkbox-layer0" type="checkbox"
                                                               {% if item_layer0.selected == True %} checked="checked" {% endif %}
                                                               onclick="click_select_checkbox('{{ item_layer0.id }}', null, true);" >
                                                        {{ item_layer0.text }}
                                                    </label>
                                                    <ul class="hidden">
                                                    {% for item_layer1 in item_layer0.choices %}
                                                        <li class="select-collapsed">
                                                        <div class="query-builder-list-item-collapsed"
                                                             onclick="expandOrCollapse('{{ item_layer1.id }}')" >&nbsp;</div>
                                                        <label for="{{ item_layer1.id }}">
                                                        <input id="{{ item_layer1.id }}"
                                                               class="var-checkbox checkbox-layer1" type="checkbox"
                                                               name="{{ elem.selected_regs }}"
                                                               value="{{ item_layer1.text }}"
                                                               {% if item_layer1.selected == True %} checked="checked" {% endif %}
                                                               onclick="click_select_checkbox('{{ item_layer1.id }}', '{{ item_layer0.id }}', true);" >
                                                        {{ item_layer1.text }}
                                                        </label>
                                                        <ul class="hidden">
                                                            {% for item_layer2 in item_layer1.choices %}
                                                                <li>
                                                                    <label for="{{ item_layer2.id }}">
                                                                    <input id="{{ item_layer2.id }}"
                                                                           class="var-checkbox checkbox-layer2" type="checkbox"
                                                                           name="{{ elem.selected_choices }}"
                                                                            {% if item_layer2.selected == True %} checked="checked" {% endif %}
                                                                           value="{{ item_layer2.text }}"
                                                                            onclick="click_select_checkbox('{{ item_layer2.id }}', '{{ item_layer1.id }}', false);">
                                                                    {{ item_layer2.text }}
                                                                    </label>
                                                                </li>
                                                            {% endfor %}
                                                        </ul>
                                                    {% endfor %}
                                                    </ul>
                                                </li>
                                            {% endfor %}
                                            </ul>
                                        {% endif %}
                                    </div>
                                    <div style="margin-top: 5px;">
                                        <input type="button"
                                               class="place_collapse_button"
                                               onclick="collapseCheckBoxes('{{ elem.varname_wrapper }}', 'checkbox-layer2')"
                                               value="OK" class="display_inline">
                                        <input type="button" onclick="checkAllBoxes('{{ elem.varname_wrapper }}');"
                                               value="Select all" class="display_inline">
                                        <input type="button" onclick="uncheckAllBoxes('{{ elem.varname_wrapper }}');"
                                               value="Deselect all" class="display_inline">
                                    </div>
                                </div>
                            </div>


                        {% elif elem.type == "date" %}
                            {{ elem.form.options }}
                            <span class="date_field_wrapper between_field">
                            {{ elem.form.from_month }} / {{ elem.form.from_year }} -
                            {{ elem.form.to_month }} / {{ elem.form.to_year }}
                            </span>
                            <span class="date_field_wrapper threshold_field hidden">
                            {{ elem.form.threshold_month }} - {{ elem.form.threshold_year }}
                            </span>

                            <div class="month-list">
                                {% for month in elem.list_months %}
                                <span class="month-toggled">{{ month }}</span>
                                {% endfor %}
                            </div>

                        {% elif elem.type == "boolean" %}

                            {% for field in elem.form %}
                                <span class="simple-field">{{ field }}</span>
                            {% endfor %}

                        {% endif %}
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            <input type="submit" onclick="performSearch();" value="{% trans 'Search' %}" name="buttonSearch"/>
            <input type="reset" onclick="resetSearch();" value="{% trans 'New query' %}" name="buttonAgain"/>

        </div>
    </div>

    <div class="box-main-table box-expanded">
         <div class="box-header">
            <div class="box-button">
                &nbsp;
            </div>
            <div class="box-text-label">
                {% trans 'Create a link' %}
            </div>

        </div>

        <div class="box-mid-end">
            <p>{% blocktrans %}Use this button to obtain a URL that will serve as a link to the current query.
                To reactivate the query in the future, paste the URL into the address bar.{% endblocktrans %}</p>
            <div class="blackout"></div>
            <div class="msgbox">
                <div class="permlink-info">
                    <div class="permlink-title">
                        URL has been created
                    </div>
                    <div class="permlink-desc">
                        To reactivate the current database query in the future, copy the following URL and then paste it into the address bar:
                    </div>
                    <div class="permlink-link">
                        <textarea wrap="virtual" rows="4">{{ url_to_copy }}</textarea>
                    </div>
                    <div class="permlink-close">
                        <input class="permlink-close-button" type="submit" value="OK, Close This">
                    </div>
                </div>
            </div>
            <input type="button" id="link-button" value="Click Here"/>
        </div>
    </div>

    <div class="box-main-table box-collapsed">
         <div class="box-header ">
            <div class="box-button">
                &nbsp;
            </div>
            <div class="box-text-label">
                {% trans 'Previous query' %}
            </div>
        </div>
        <div class="box-mid-end">
            &nbsp;

        </div>
    </div>

</div>
