{% extends "base.html" %}
{% load sass_tags %}
{% load i18n %}
{% load thumbnail %}
{% load resources_extras %}

{% block csslist %}
<link href="{% sass_src 'scss/navbar-site.scss' %}" rel="stylesheet" type="text/css" />
<link href="{% sass_src 'scss/main.scss' %}" rel="stylesheet" type="text/css" />
<link href="{% sass_src 'scss/resources.scss' %}" rel="stylesheet" type="text/css" />
<link href="{% sass_src 'scss/image-galleries.scss' %}" rel="stylesheet" type="text/css" />
<link href="{% sass_src 'scss/off-canvas.scss' %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block title %}{% trans 'Images Search' %}{% endblock %}

{% block content %}
<div class="container-new">
  <div class="row row-offcanvas row-offcanvas-right">
		<div class='col-md-4 col-xs-12 col-lg-3 sidebar-offcanvas' id="sidebar">
			{% include "resources/images-left-menu.html" %}
		</div>

    <div class="col-md-8 col-xs-12 col-lg-9 ">

			<p class="hidden-md">
        <button type="button" class="btn btn-solid btn-sm" data-toggle="offcanvas">
          <div>
            <span class="fa fa-exchange" style=" vertical-align: middle;"></span>
            <span>Toggle Sidebar</span>
          </div>
        </button>
      </p>

			<div id="center-content-inner">
				<div class="page-title-1">{% trans "Image Galleries" %}</div>



        <div class="images-category">
            <div class="page-title-2">
              {% if not query %}
        	        {% if enabled_categories|length == 1 %}
        	            {% for i in enabled_categories %}
        	                <div class="page-title-2">{% trans 'Images of ' %}{{ i }}</div>
        	            {% endfor %}
        	        {% elif enabled_categories|length == 4 %}
        	            <div class="page-title-2">{% trans 'All images' %} ({{ results|length }} {% trans 'images' %})</div>
        	        {% else %}
        	            <div class="page-title-2">{% trans 'Search results' %} ({{ results|length }} {% trans 'images' %})</div>
        	        {% endif %}
        	    {% else %}
        	        <div class="page-title-2">{% trans 'Search results' %} ({{ results|length }} {% trans 'images' %})</div>
        	    {% endif %}

            </div>
            <div class="images-category-link">
              <a href="{% url 'resources:images' %}">{% trans 'Return to all categories' %}</a>
            </div>
        </div>

		            {% for result in results %}
		                {% ifequal forloop.counter0|modulo:4 0 %}
										<div class="gallery-flexbox">
		                {% endifequal %}

										<div class="gallery-grid">
												<a href="{% url 'resources:images-search-detail' forloop.counter %}">
		                        <div class="grid">
		                            {% thumbnail result.file "100x100" as im %}
		                                <img src="{{ im.url }}" height="100" />
		                            {% empty %}
		                                <img src="{{ MEDIA_URL }}{{ result.file }}" height="100" />
		                            {% endthumbnail %}
		                        </div>
		                    </a>

		                    <div class="grid-text">
		                        <div class="gallery-image-label">
		                            {{ result.title|trans_log }}
		                        </div>
		                        {% if result.date %}
		                            <div class="gallery-image-description">
		                                ({{ result.date }})
		                            </div>
		                        {% endif %}
		                     </div>
											 </div>
		                {% if forloop.last or forloop.counter0|modulo:4 == 3 or forloop.las %}
									</div>
		                {% endif %}
		            {% endfor %}

			</div>
    </div>
  </div>
</div>



{% endblock %}

{% block footer %}
{% include "footer.html" %}
{% endblock %}
