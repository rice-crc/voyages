{% load i18n %}

<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	<div class="nav-container">
		<!-- <a href="/" class="navbar-brand">Slave Voyages</a> -->
		<a href="/" class="navbar-brand" ><img src="{{STATIC_URL}}images/site/sv-logo.png" alt="Slave Voyages" class="sv-logo" style="height:80px;width:239px"> </a>
		<button class="navbar-toggler float-right" aria-label="Navigation Toggle" type="button" data-toggle="collapse" data-target="#sv-navbar-collapse">
			<span class="navbar-toggler-icon"></span>
		</button>
		<div class="navbar-collapse collapse" id="sv-navbar-collapse">
			<ul class="navbar-nav ml-auto" id="sv-navbar">
				<li class="nav-item dropdown" id="link-trans-atlantic">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">{% trans 'Trans-Atlantic' %}</a>
					<div class="dropdown-menu">
						<a class="dropdown-item" href="{% url 'voyage:about' %}">{% trans "Understanding the Database" %}</a>
						<a class="dropdown-item" href="{% url 'voyage:database' %}">{% trans "Database" %}</a>
						<a class="dropdown-item" href="{% url 'assessment:estimates' %}">{% trans "Estimates" %}</a>
						<a class="dropdown-item" href="{% url 'voyage:essays' %}">{% trans "Essays" %}</a>
						<a class="dropdown-item" href="{% url 'voyage:downloads' %}">{% trans "Downloads" %}</a>

						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="{% url 'voyage:maps' %}">{% trans "Introductory Maps" %}</a>
						<a class="dropdown-item" href="{% url 'voyage:ship' %}">{% trans '3D Videos of Slaving Ships' %}</a>
						<a class="dropdown-item" href="{% url 'assessment:estimates' %}?selected_tab=timeline">{% trans 'Timeline and Chronology' %}</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="{% url 'contribute:index' %}">{% trans "Contribute Data" %}</a>
					</div>
				</li>

				<li class="nav-item dropdown" id="link-american">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" >{% trans 'Intra-American' %}</a>
					<div class="dropdown-menu">
						<a class="dropdown-item" href="{% url 'american:about' %}">{% trans "Understanding the Database" %}</a>
						<a class="dropdown-item" href="{% url 'american:database' %}">{% trans "Database" %}</a>
						<a class="dropdown-item" href="{% url 'american:essays' %}">{% trans "Essays" %}</a>
						<a class="dropdown-item" href="{% url 'american:downloads' %}">{% trans "Downloads" %}</a>
						<div class="dropdown-divider"></div>
						<a class="dropdown-item" href="{% url 'contribute:index' %}">{% trans "Contribute Data" %}</a>
					</div>
				</li>

				<li class="nav-item dropdown" id="link-past">
					<a class="nav-link dropdown-toggle d-xs-block d-lg-none d-xl-block" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" >{% trans 'People of the Atlantic Slave Trade' %}</a>
					<a class="nav-link dropdown-toggle d-none d-lg-block d-xl-none" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" >{% trans 'PAST' %}</a>
					<div class="dropdown-menu">
						<a class="dropdown-item" href="{% url 'resources:about' %}">Understanding the Database</a>
						<a class="dropdown-item" href="{% url 'past:database' %}">{% trans "Database" %}</a>
						<a class="dropdown-item" href="{% url 'resources:downloads' %}">{% trans "Downloads" %}</a>
					</div>
				</li>

				<li class="nav-item dropdown" id="link-resources">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" >{% trans 'Resources' %}</a>
					<div class="dropdown-menu">
						<a class="dropdown-item" href="{% url 'resources:images' %}">{% trans "Image Galleries" %}</a>
						<a class="dropdown-item" href="{% url 'resources:lessons' %}">{% trans "Lesson Plans" %}</a>
						<a class="dropdown-item" href="{% url 'resources:links' %}">{% trans "External Links" %}</a>
					</div>
				</li>

				<li class="nav-item dropdown" id="link-about">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false" >{% trans 'About' %}</a>
					<div class="dropdown-menu dropdown-menu-right">
						<a class="dropdown-item" href="{% url 'about:about' %}">{% trans "About" %}</a>
						<a class="dropdown-item" href="/about/about#news/10/en/">{% trans "News" %}</a>
						<a class="dropdown-item" href="https://docs.google.com/forms/d/e/1FAIpQLSc2xoG0_OpkW--hZUXAvwTB6ZuNYDze1MDre1c5gyH0MrS8Jw/viewform" rel="noopener noreferrer" target="_blank">{% trans "Provide User Feedback" %}</a>
						<a class="dropdown-item" href="mailto:svopcom@googlegroups.com?subject=Report an Issue"  rel="noopener noreferrer" target="_blank">{% trans "Report Issues" %}</a>
					</div>
				</li>

				{% get_current_language as LANGUAGE_CODE %}
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">{{ LANGUAGE_CODE|upper }}</a>
					<div class="dropdown-menu dropdown-menu-right">

						{% for lang in LANGUAGES %}
							{% get_language_info for lang.0 as lang_info %}
							<a class="dropdown-item language_link language_link_{{ lang.0 }}" href="{% if lang.0 == LANGUAGE_CODE %}#{% else %}{% url 'set_lang' lang.0 %}{% endif %}">{{ lang_info.name_local|title }}</a>
						{% endfor %}
					</div>
				</li>

			</ul>
		</div>
	</div>
</nav>

<!--  Contains the navigation menu in a nested-unordered-list hierarchy
	- links are managed by the navigation_topbar.js menu -->

	<script type="text/javascript">
	// highlight the active link in the navigation bar
	var url = window.location.pathname;
	urlElements = url.split("/");
	if (urlElements[1] == "voyage" || urlElements[1] == "assessment") {
		document.getElementById("link-trans-atlantic").classList.add("active-link");
	} else if (urlElements[1] == "american") {
		document.getElementById("link-american").classList.add("active-link");
	} else if (urlElements[1] == "past") {
		document.getElementById("link-past").classList.add("active-link");
	} else if (urlElements[1] == "resources" && (urlElements[2] == "about" || urlElements[2] == "names-database" || urlElements[2] == "downloads")) {
		document.getElementById("link-past").classList.add("active-link");
	} else if (urlElements[1] == "resources" || urlElements[1] == "education") {
		document.getElementById("link-resources").classList.add("active-link");
	} else if (urlElements[1] == "about" || urlElements[1] == "help") {
		document.getElementById("link-about").classList.add("active-link");
	}

	$(document).ready(function() {
		// reload the page after a language is switched
		$('.language_link').click(function(e) {
			e.preventDefault();
			$.ajax($(this).attr('href'))
				.done(function() {
					window.location.reload();
				});
		});
	});
	</script>
